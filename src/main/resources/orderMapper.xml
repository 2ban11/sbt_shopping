<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sbt.shopping.jaepil.OrderMapper">
	<select id="getOrder"
		resultType="com.sbt.shopping.jaepil.OrderDTO">
		select * from order_detail od, product p
		where
		od.od_product = p.p_no
		and od.od_id = #{a_id} order by od_date
		desc
	</select>

	<select id="getOrderByDate" resultType="com.sbt.shopping.jaepil.OrderDTO" parameterType="map">
		select * from order_detail
		od, product p
		where od.od_product = p.p_no
		and od.od_date between to_date(#{startdate}) and
		to_date(#{enddate}) + 0.99999 and od.od_id = #{a_id}
	</select>
	
	<update id="refund">
		update order_detail set od_state = '환불요청' where od_no = #{od_no}
	</update>
	<update id="refundCancel">
		update order_detail set od_state = '주문완료' where od_no = #{od_no}
	</update>
</mapper>